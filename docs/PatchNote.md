# <span style="color: red;">Patch Note</span>

---

## V.0.3.3

- **液体システム（Liquid System）の実装**
    - 水などの液体が流れるシミュレーションロジックを導入
    - 液体データの保存（Persistence）およびレンダリングへの対応
- **温度システム（Temperature System）の導入**
    - 深度に応じた温度上昇と、一定温度以上での採掘速度低下デバフを実装
    - ショップに「耐熱スーツ」アップグレードを追加
- **データ構造の刷新とブロックデータの分割**
    - `blocks.json` をカテゴリ（`solid`, `liquid`, `gas`, `special`）ごとに分割し、拡張性を向上
- **セーブデータの圧縮対応**
    - `zstd` によるワールド・セーブデータの圧縮を導入し、ストレージ効率を向上
- **モジュールの大規模な再構成とリファクタリング**
    - `interaction` 論理を `breaking`, `functional`, `placing` に細分化
    - `world` 管理モジュールを `access`, `liquids`, `update`, `view` に分割
    - マップUI関連を `map/` ディレクトリ配下に整理（`markers`, `overlay`, `terrain`）
- **描画およびUIの改善**
    - 背景描画機能の追加
    - 画面下部に現在指しているブロックの名前と座標を表示するブロック情報HUDを追加
    - ゲーム内およびエディタにおけるカーソル座標計算の修正・精度向上
    - マップレンダリングの最適化
- **内部システムの強化**
    - 液体システムと新データ構造に対応するためのセーブ/ロード処理の全面刷新
    - 定数およびコンポーネントの定義を整理・拡充

---

## V.0.3.2

- **アーキテクチャの大規模リファクタリング**
    - モノリシックな構造を解消し、機能ごとにモジュール分割（`handlers`, `update_logic`, `managers/world` 等）
    - UIレンダリングロジックを再構築し、HUDや各スクリーンを分離・整理
- **マップエディタの実装 (CLI/TUI)**
    - ターミナル上で動作する解凍JSONエディタを追加（`cargo editor`）
- **ゲーム内機能の拡張**
    - 全体マップ画面（`M`キー）の実装。ブロックの色情報をデータ定義から取得して描画
    - ショップおよびワープシステムのロジック強化とUI刷新
- **データ駆動開発の推進**
    - ブロック定義を `data/blocks.json` に外部化し、拡張性を向上
- **その他の変更**
    - 依存関係の更新（`ratatui`, `zstd` 等の追加）
    - アセットの更新

---

## V.0.3.1

- **アイテム・インベントリシステムの刷新**
    - アイテムの「重量（Weight）」概念を導入。貨物容量が個数制限から重量制限へ
    - 貨物内のアイテムを「選択（SELECTED）」し、ワールド内に設置できる機能を実装
    - アイテム構造を拡張し、天然物や自動収納のフラグを保持するように変更
- **倉庫（Warehouse）システムの導入**
    - 拠点にアイテムを長期保管できるストレージ機能を実装
    - 数量切り替え（1, 10, 100, ALL）や倉庫からの直接売却が可能な専用UIを追加
- **ワールド・ブロックシステムの高度化**
    - ブロックの種類（BlockType）を定義し、それぞれに固有の硬度や性質を設定
    - 深度に応じた硬度倍率（5%増加/block）の適用
    - 空きスペースへのブロック設置機能を実装
- **リスポーン（Respawn）システムの追加**
    - 燃料切れ等の際のペナルティ（貨物消失、所持金10%減）を伴う拠点復帰機能を実装
- **ワープゲートの仕様変更**
    - ワープゲートをアイテムとして購入・設置できるように変更
    - 設置時に名前を付けることが可能になり、初期状態で拠点（Home）が登録されるように
- **データ駆動型リソース管理**
    - `resources.json` による外部データ管理を開始。多種多様な鉱石、宝石、合金、処理済みリソースを定義
- **ビジュアル・UIの強化**
    - スプライトアトラスを更新し、多数の新アイテムアイコンを追加
    - HUDに選択中アイテムのプレビューと重量インジケーターを追加
    - インベントリおよび倉庫画面を透過レイヤーを用いたモダンなデザインに刷新
- **技術的改善**
    - ゲームの実行レートを 60 FPS に固定し、動作を安定化
    - 定数管理を整理し、コードのメンテナンス性を向上

---

## V.0.3.0

- **ゲームシステムの深化**
    - 燃料（Fuel）と所持金（Money）の概念を導入
    - 掘削機、燃料タンク、エンジン、貨物室のアップグレードシステムを実装
    - 地上でのアイテム売却と燃料補給の仕組みを追加
    - ワープゲートの購入、設置、テレポート機能を実装
- **物理演算と移動システムの刷新**
    - 加速度、摩擦、重力を伴う物理ベースの移動に変更
    - プレイヤーと地形の衝突判定を精緻化
- **アイテムシステムの導入**
    - ブロック破壊時にアイテム（石炭、石など）がドロップし、物理挙動を伴って出現するように
    - ドロップアイテムの回収機能を実装
- **UIとビジュアルの改善**
    - HUD（燃料計、所持金、深度表示など）を実装
    - ショップ画面、ワープメニュー、セーブ選択画面を新規実装
    - ウィンドウアイコンを追加し、スプライトアトラスを更新
- **アーキテクチャの整理**
    - コードをモジュール化（`game`, `managers`, `render` など）し、メンテナンス性を向上
    - イベント駆動型のUI処理を導入
    - 多言語対応の強化（JSONファイルの更新）

---

## V.0.2.0

- 開発環境をPython(Pyxel)からRust(Macroquad)に移行
- アセット(テクスチャ、フォント)を埋め込み
- 複数ファイル先への保存を可能に

---

## V.0.1.4

- 地面の硬度設定アルゴリズムを変更(Y座標での硬度の変化など)
- デバッグ情報を追加
- 通知にアニメーションを追加
- 言語ファイルのキーを変更
- ポップアップ通知を実装
- チャンクシステムを実装、導入
- セーブシステムを変更
- デバッグ情報を追加/レイアウトの変更
- 言語設定を追加
- セーブやロードなどの際のトースト通知を追加

---

## V.0.1.3

- メニューを実装
- セーブ/ロード機能を実装
- メニュー表示をMからESCキーに変更
- メニュー表示時にデバッグ情報を非表示
- デバッグ情報の視認性向上

---

## V.0.1.2

- デバッグの情報を追加
- sprite_sheet.pyxresが存在しない場合の応急措置を追加
- 様々な変更、最適化
- カメラを連続で動かしたときに描画が重くなる問題を修正
- まれに2マス分移動する問題を修正

---

## V.0.1.1

- メニューの枠組みを作成
- ブロックの破壊の見た目を追加
- 移動を追加
- 一番上を草ブロックに変換
- 新しく鉱石を追加
- スタートをスペースからボタンへ変更
- ブロックの耐久の関数の変更
- ブロックのカーソルの下に何もないとき非表示するように変更
- デバッグをDからF3キーに変更
- デバッグをトグル式に変更

---

## V.0.1.0

- ブロックの耐久の関数の変更

---
